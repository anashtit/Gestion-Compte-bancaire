<div>
  <h2>Effectuer un virement</h2>
  <!-- Associer le formulaire à une variable local template 'virementForm' -->
  <form #virementForm="ngForm" (ngSubmit)="effectuerVirement()" novalidate>
    
    <div>
      <label for="compteId">ID du compte</label>
      <input 
        type="number" 
        id="compteId" 
        [(ngModel)]="compteId" 
        name="compteId" 
        required />
      <!-- Message d'erreur si le champ n'est pas rempli -->
      <small *ngIf="virementForm.controls['compteId']?.invalid && virementForm.controls['compteId']?.touched" style="color: red;">
        Ce champ est obligatoire
      </small>
    </div>

    <div>
      <label for="numCompte">Num Compte</label>
      <input 
        type="text" 
        id="numCompte" 
        [(ngModel)]="numCompte" 
        name="numCompte" 
        required />
      <small *ngIf="virementForm.controls['numCompte']?.invalid && virementForm.controls['numCompte']?.touched" style="color: red;">
        Ce champ est obligatoire
      </small>
    </div>

    <div>
      <label for="montant">Montant</label>
      <input 
        type="number" 
        id="montant" 
        [(ngModel)]="montant" 
        name="montant" 
        required />
      <small *ngIf="virementForm.controls['montant']?.invalid && virementForm.controls['montant']?.touched" style="color: red;">
        Ce champ est obligatoire
      </small>
    </div>

    <div>
      <label for="description">Description</label>
      <input 
        type="text" 
        id="description" 
        [(ngModel)]="description" 
        name="description" 
        required />
      <small *ngIf="virementForm.controls['description']?.invalid && virementForm.controls['description']?.touched" style="color: red;">
        Ce champ est obligatoire
      </small>
    </div>

    <!-- Bouton désactivé tant que le formulaire est invalide -->
    <button 
      type="submit" 
      class="btn btn-primary" 
      [disabled]="virementForm.invalid">
      Envoyer
    </button>
    
    <button 
      type="button" 
      class="btn btn-secondary" 
      (click)="goBack()">
      Annuler
    </button>


    <button type="button" class="btn btn-secondary" 
     (click)="transferHistory()" >Historique</button>
  

  </form>

  <!-- Messages de succès ou d'erreur -->
  <p *ngIf="successMessage" style="color: green">{{ successMessage }}</p>
  <p *ngIf="errorMessage" style="color: red">{{ errorMessage }}</p>
</div>
